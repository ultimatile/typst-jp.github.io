{"route":"/docs/reference/math/","title":"数式","description":"Typstにおける数式に関連する関数のドキュメント","part":null,"outline":[{"id":"summary","name":"概要","children":[]},{"id":"変数","name":"変数","children":[]},{"id":"記号","name":"記号","children":[]},{"id":"改行","name":"改行","children":[]},{"id":"関数呼び出し","name":"関数呼び出し","children":[]},{"id":"配置","name":"配置","children":[]},{"id":"数式フォント","name":"数式フォント","children":[]},{"id":"mathモジュール","name":"mathモジュール","children":[]},{"id":"definitions","name":"定義","children":[]}],"body":{"kind":"category","content":{"name":"math","title":"数式","details":"<p>Typstには数式を組版するための特別な<a href=\"/docs/reference/syntax/#math\">構文</a>とライブラリ関数があります。\n数式は、テキスト中にインラインで、あるいは独立したブロックのいずれかで表示できます。\n始まりと終わりに少なくとも1つの空白がある場合（例えば、<code><span class=\"typ-math-delim\">$</span> x<span class=\"typ-math-op\">^</span>2 <span class=\"typ-math-delim\">$</span></code>）はブロックとして組版されます。</p>\n<h2 id=\"変数\">変数</h2>\n<p>数式モードでは1文字は常にそのまま表示されます。\nしかし、複数の文字は変数か関数として解釈されます。\n複数の文字を文字通りに表示するには引用符で囲んでください。\n1文字の変数にアクセスしたい場合は<a href=\"/docs/reference/scripting/#expressions\">ハッシュ構文</a>を使用してください。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-math-delim\">$</span> A = <span class=\"typ-pol\">pi</span> r<span class=\"typ-math-op\">^</span>2 <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-str\">&quot;area&quot;</span> = <span class=\"typ-pol\">pi</span> <span class=\"typ-pol\">dot</span> <span class=\"typ-str\">&quot;radius&quot;</span><span class=\"typ-math-op\">^</span>2 <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-func\">cal</span><span class=\"typ-punct\">(</span>A<span class=\"typ-punct\">)</span> <span class=\"typ-escape\">:=</span>\n    { x <span class=\"typ-pol\">in</span> <span class=\"typ-pol\">RR</span> | x <span class=\"typ-str\">&quot;is natural&quot;</span> } <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> x <span class=\"typ-op\">=</span> <span class=\"typ-num\">5</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-pol\">#</span><span class=\"typ-pol\">x</span> &lt; 17 <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/8524e76a7c6784dd9c30bb62d92a4897.png\" alt=\"Preview\"></div></div>\n<h2 id=\"記号\">記号</h2>\n<p>数式モードでは<code>pi</code>、<code>dot</code>、<code>RR</code>などのさまざまな<a href=\"/docs/reference/symbols/sym/\">記号</a>が利用可能です。\n多くの数式記号ではバリアントが利用可能です。\n記号に<a href=\"/docs/reference/foundations/symbol/\">修飾子</a>を適用することで異なるバリアントを選択できます。\nTypstはさらに<code>=&gt;</code>のような、記号を近似するいくつかの省略記法を認識します。\nそのような省略記法が存在する場合、記号ドキュメントのリストに記載されています。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-math-delim\">$</span> x &lt; y <span class=\"typ-escape\">=&gt;</span> x <span class=\"typ-pol\">gt</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">eq</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">not</span> y <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/dd08c3941abc7b8b1c9310fbebf71b6e.png\" alt=\"Preview\"></div></div>\n<h2 id=\"改行\">改行</h2>\n<p>数式には改行を含めることもできます。\n各行には、その場所で配置することを指定する、1つまたは複数の <em>配置点</em>（<code>&amp;</code>）を含めることができます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-math-delim\">$</span> <span class=\"typ-pol\">sum</span><span class=\"typ-math-op\">_</span><span class=\"typ-punct\">(</span>k=0<span class=\"typ-punct\">)</span><span class=\"typ-math-op\">^</span>n k\n    <span class=\"typ-math-op\">&amp;</span>= 1 + <span class=\"typ-escape\">...</span> + n <span class=\"typ-escape\">\\</span>\n    <span class=\"typ-math-op\">&amp;</span>= <span class=\"typ-punct\">(</span>n(n+1)<span class=\"typ-punct\">)</span> <span class=\"typ-math-op\">/</span> 2 <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/e18e117e8b98666dc9823bbeed6dd264.png\" alt=\"Preview\"></div></div>\n<h2 id=\"関数呼び出し\">関数呼び出し</h2>\n<p>数式モードはハッシュプレフィックスを用いない特別な関数呼び出しをサポートしています。\nこのような「数式呼び出し」内では、引数リストは以下の通りコード中とは少し異なる動作をします。</p>\n<ul>\n<li>その中では、Typstは依然として「数式モード」です。\nしたがって、その中で数式を直接書くことができますが、コード式を渡すには（数式構文で利用可能なstringを除いて）ハッシュ構文を使う必要があります。</li>\n<li>位置引数、名前付き引数、引数展開をサポートしています。</li>\n<li>後続のコンテンツブロックはサポートされていません。</li>\n<li>2次元引数リストのための追加の構文があります。\nセミコロン（<code>;</code>）はその前のカンマ区切りの引数を配列引数へとマージします。</li>\n</ul>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-math-delim\">$</span> <span class=\"typ-func\">frac</span><span class=\"typ-punct\">(</span>a<span class=\"typ-math-op\">^</span>2<span class=\"typ-punct\">,</span> 2<span class=\"typ-punct\">)</span> <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-func\">vec</span><span class=\"typ-punct\">(</span>1<span class=\"typ-punct\">,</span> 2<span class=\"typ-punct\">,</span> delim<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;[&quot;</span><span class=\"typ-punct\">)</span> <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-func\">mat</span><span class=\"typ-punct\">(</span>1<span class=\"typ-punct\">,</span> 2<span class=\"typ-punct\">;</span> 3<span class=\"typ-punct\">,</span> 4<span class=\"typ-punct\">)</span> <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-func\">mat</span><span class=\"typ-punct\">(</span><span class=\"typ-op\">..</span><span class=\"typ-func\">#</span><span class=\"typ-func\">range</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">5</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">chunks</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">)</span> <span class=\"typ-math-delim\">$</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-pol\">lim</span><span class=\"typ-math-op\">_</span>x =\n    <span class=\"typ-func\">op</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;lim&quot;</span><span class=\"typ-punct\">,</span> limits<span class=\"typ-punct\">:</span> <span class=\"typ-key\">#</span><span class=\"typ-key\">true</span><span class=\"typ-punct\">)</span><span class=\"typ-math-op\">_</span>x <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/a04e7f595e2b6bd62e8eb21bcf63a042.png\" alt=\"Preview\"></div></div>\n<p>数式呼び出しでカンマやセミコロンをそのまま書きたい場合は、バックスラッシュを用いてエスケープしてください。\n一方、コロンは識別子の直後にあるときにのみ特別な方法で認識されるため、そのまま表示したい場合は単にその前に空白を挿入してください。</p>\n<p>前にハッシュがある関数呼び出しは通常のコードの関数呼び出しで、これらの規則に影響されません。</p>\n<h2 id=\"配置\">配置</h2>\n<p>数式が複数の <em>配置点</em>（<code>&amp;</code>）を含む場合、右揃えと左揃えが交互に行われる列のブロックが作成されます。\n以下の例では、<code>(3x + y) / 7</code>という式は右揃えで、<code>= 9</code>が左揃えです。\n&quot;given&quot;という単語も左揃えです。これは<code>&amp;&amp;</code>が行内に2つの配置点を作成し、2回配置方法が切り替わるためです。\n<code>&amp; &amp;</code>と<code>&amp;&amp;</code>は全く同じように振る舞います。\n一方、&quot;multiply by 7&quot;は、その前に<code>&amp;</code>がただ1つあるため右揃えです。\n各配置点は単に右揃えと左揃えを交互に切り替えます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-math-delim\">$</span> <span class=\"typ-punct\">(</span>3x + y<span class=\"typ-punct\">)</span> <span class=\"typ-math-op\">/</span> 7 <span class=\"typ-math-op\">&amp;</span>= 9 <span class=\"typ-math-op\">&amp;</span><span class=\"typ-math-op\">&amp;</span> <span class=\"typ-str\">&quot;given&quot;</span> <span class=\"typ-escape\">\\</span>\n  3x + y <span class=\"typ-math-op\">&amp;</span>= 63 <span class=\"typ-math-op\">&amp;</span> <span class=\"typ-str\">&quot;multiply by 7&quot;</span> <span class=\"typ-escape\">\\</span>\n  3x <span class=\"typ-math-op\">&amp;</span>= 63 <span class=\"typ-escape\">-</span> y <span class=\"typ-math-op\">&amp;</span><span class=\"typ-math-op\">&amp;</span> <span class=\"typ-str\">&quot;subtract y&quot;</span> <span class=\"typ-escape\">\\</span>\n  x <span class=\"typ-math-op\">&amp;</span>= 21 <span class=\"typ-escape\">-</span> y<span class=\"typ-math-op\">/</span>3 <span class=\"typ-math-op\">&amp;</span> <span class=\"typ-str\">&quot;divide by 3&quot;</span> <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/f1233da95c9167f12592cfc2f7cf3674.png\" alt=\"Preview\"></div></div>\n<h2 id=\"数式フォント\">数式フォント</h2>\n<p>以下に示すように、<a href=\"/docs/reference/styling/#show-rules\">show-setルール</a>を用いて数式フォントの設定が可能です。\n数式組版に適しているのは一部の特別なOpenType数式フォントのみであることに注意してください。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> math<span class=\"typ-punct\">.</span><span class=\"typ-func\">equation</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>font<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Fira Math&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-math-delim\">$</span> <span class=\"typ-pol\">sum</span><span class=\"typ-math-op\">_</span><span class=\"typ-punct\">(</span>i <span class=\"typ-pol\">in</span> <span class=\"typ-pol\">NN</span><span class=\"typ-punct\">)</span> 1 + i <span class=\"typ-math-delim\">$</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/a86f5771fd97e49bb413be94448c5f66.png\" alt=\"Preview\"></div></div>\n<h2 id=\"mathモジュール\">mathモジュール</h2>\n<p>全ての数学関数は、数式中ではデフォルトで利用できる<code>math</code><a href=\"/docs/reference/scripting/#modules\">モジュール</a>に属しています。\n数式外では、<code>math.</code>プレフィックスを付けるとアクセスできます。</p>","items":[{"name":"accent","route":"/docs/reference/math/accent/","oneliner":"対象の要素にアクセント記号を付ける。","code":true},{"name":"attach","route":"/docs/reference/math/attach/","oneliner":"下付き文字、上付き文字、limits。","code":false},{"name":"binom","route":"/docs/reference/math/binom/","oneliner":"二項係数。","code":true},{"name":"cancel","route":"/docs/reference/math/cancel/","oneliner":"数式の一部分上に対角線を表示。","code":true},{"name":"cases","route":"/docs/reference/math/cases/","oneliner":"場合分け。","code":true},{"name":"class","route":"/docs/reference/math/class/","oneliner":"特定の数式クラスを強制的に適用。","code":true},{"name":"equation","route":"/docs/reference/math/equation/","oneliner":"数式。","code":true},{"name":"frac","route":"/docs/reference/math/frac/","oneliner":"分数。","code":true},{"name":"lr","route":"/docs/reference/math/lr/","oneliner":"区切り文字の対応","code":false},{"name":"mat","route":"/docs/reference/math/mat/","oneliner":"行列。","code":true},{"name":"op","route":"/docs/reference/math/op/","oneliner":"数式中のテキスト演算子。","code":true},{"name":"primes","route":"/docs/reference/math/primes/","oneliner":"グループ化されたプライム記号。","code":true},{"name":"roots","route":"/docs/reference/math/roots/","oneliner":"平方根とその他の冪根。","code":false},{"name":"sizes","route":"/docs/reference/math/sizes/","oneliner":"数式中の式に大きさに関するスタイルを強制します。","code":false},{"name":"stretch","route":"/docs/reference/math/stretch/","oneliner":"字形を伸縮します。","code":true},{"name":"styles","route":"/docs/reference/math/styles/","oneliner":"数式中の別字体。","code":false},{"name":"underover","route":"/docs/reference/math/underover/","oneliner":"数式の一部の上部または下部の区切り文字。","code":false},{"name":"variants","route":"/docs/reference/math/variants/","oneliner":"数式中の別書体。","code":false},{"name":"vec","route":"/docs/reference/math/vec/","oneliner":"列ベクトル。","code":true}],"shorthands":null}}}