{"route":"/docs/reference/styling/","title":"スタイル設定","description":"Typst で文書のスタイル設定をするために必要な概念","part":null,"outline":[{"id":"set-rules","name":"setルール","children":[]},{"id":"show-rules","name":"showルール","children":[]}],"body":{"kind":"html","content":"<h1>スタイル設定</h1>\n<p>Typstには柔軟なスタイル設定機能を持ち、出力される文書に対して自動的に任意のスタイル設定を適用します。\n<em>setルール</em> では要素の基本プロパティを設定できます。\nしかし、やりたいこと全てに対応するプロパティがあらかじめ実装されているとは限りません。\nこのため、Typstは要素の外観を完全に再定義できる <em>showルール</em> もサポートしています。</p>\n<h2 id=\"set-rules\">setルール</h2>\n<p>setルールを使うと、要素の外観をカスタマイズできます。\nこれらは、<code><span class=\"typ-key\">set</span></code>キーワード（マークアップでは<code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span></code>）を前に置いた<a href=\"/docs/reference/foundations/function/#element-functions\">要素関数</a>への<a href=\"/docs/reference/foundations/function/\">関数呼び出し</a>として記述されます。\nsetルールに指定できるのは、その関数のオプションのパラメーターだけです。\nどのパラメーターがオプションであるかは、各関数のドキュメントを参照してください。\n以下の例では、2つのsetルールを使って、<a href=\"/docs/reference/text/text/#parameters-font\">フォント</a>と<a href=\"/docs/reference/model/heading/#parameters-numbering\">見出し番号</a>を変更しています。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;I.&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>\n  font<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;New Computer Modern&quot;</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Introduction</span>\nWith set rules, you can style\nyour document.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/9d6d1565eca1266b69c1e10e8c947f7e.png\" alt=\"Preview\"></div></div>\n<p>setルールは、そのまま記述するとファイルの最後まで適用されます。\nブロックの中にネストすると、そのブロックの終わりまで適用されます。\nブロックを使えば、setルールの効果を指定した部分に限定できます。\n以下では、contentブロックを用いてスコープすることで、特定のリストのスタイルのみを変更しています。</p>\n<div class=\"previewed-code\"><pre><code>This list is affected: <span class=\"typ-punct\">#</span><span class=\"typ-punct\">[</span>\n  <span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">list</span><span class=\"typ-punct\">(</span>marker<span class=\"typ-punct\">:</span> <span class=\"typ-punct\">[</span><span class=\"typ-escape\">--</span><span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-marker\">-</span> Dash\n<span class=\"typ-punct\">]</span>\n\nThis one is not:\n<span class=\"typ-marker\">-</span> Bullet\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/e9c9106d715f7f5cc305c7567b35f1a6.png\" alt=\"Preview\"></div></div>\n<p>ときには、setルールを条件付きで設定したい場合もあるでしょう。\nその場合には <em>set-if</em> ルールを使用します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-func\">task</span><span class=\"typ-punct\">(</span>body<span class=\"typ-punct\">,</span> critical<span class=\"typ-punct\">:</span> <span class=\"typ-key\">false</span><span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>red<span class=\"typ-punct\">)</span> <span class=\"typ-key\">if</span> critical\n  <span class=\"typ-punct\">[</span><span class=\"typ-marker\">-</span> <span class=\"typ-pol\">#</span><span class=\"typ-pol\">body</span><span class=\"typ-punct\">]</span>\n<span class=\"typ-punct\">}</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">task</span><span class=\"typ-punct\">(</span>critical<span class=\"typ-punct\">:</span> <span class=\"typ-key\">true</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>Food today?<span class=\"typ-punct\">]</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">task</span><span class=\"typ-punct\">(</span>critical<span class=\"typ-punct\">:</span> <span class=\"typ-key\">false</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>Work deadline<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/fd4966a8439dae633a77e390f53b005f.png\" alt=\"Preview\"></div></div>\n<h2 id=\"show-rules\">showルール</h2>\n<p>showルールを使えば、特定の種類の要素の外観を詳細に設定できます。\nshowルールの基本的な記述方法は、show-setルールです。\n<code><span class=\"typ-key\">show</span></code> キーワードの後に <a href=\"/docs/reference/foundations/selector/\">セレクター</a>、コロン、setルールと続けて記述します。\nセレクターの基本的な記述方法は <a href=\"/docs/reference/foundations/function/#element-functions\">要素関数</a>を置くことであり、setルールは選択された要素にのみ適用されます。\n下の例では、見出しは紺色になり、他のテキストは黒色のままです。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>navy<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= This is navy-blue</span>\nBut this stays black.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/d2d8f7b75d586130c5564fd7947e349.png\" alt=\"Preview\"></div></div>\n<p>show-setルールを使えば、さまざまな関数のプロパティを組み合わせることが可能です。\nしかし、組み合わせられるプロパティはTypstであらかじめ定義されているものに限定されます。\n最大限の柔軟性を得るには、要素をゼロからフォーマットする方法を定義するshowルールを書くことができます。\nこのようなshowルールを書くには、コロンの後のsetルールを任意の<a href=\"/docs/reference/foundations/function/\">関数</a>に置き換えてください。\nこの関数は対象の要素を受け取り、任意のコンテンツを返すことができます。\n関数に渡された要素で利用可能な<a href=\"/docs/reference/scripting/#fields\">フィールド</a>は、それぞれの要素関数のパラメーターと一致します。\n以下は、ファンタジー百科事典の見出しをフォーマットするshowルールを定義する例です。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;(I)&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">:</span> it <span class=\"typ-op\">=&gt;</span> <span class=\"typ-punct\">[</span>\n  <span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n  <span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>font<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Inria Serif&quot;</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-escape\">\\~</span> <span class=\"typ-func\">#</span><span class=\"typ-func\">emph</span><span class=\"typ-punct\">(</span>it<span class=\"typ-punct\">.</span>body<span class=\"typ-punct\">)</span>\n     <span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span>\n       it<span class=\"typ-punct\">.</span>numbering\n     <span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\~</span>\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-heading\">= Dragon</span>\nWith a base health of 15, the\ndragon is the most powerful\ncreature.\n\n<span class=\"typ-heading\">= Manticore</span>\nWhile less powerful than the\ndragon, the manticore gets\nextra style points.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/62bbe4aa94b0a082e3baa01eaf3c3d08.png\" alt=\"Preview\"></div></div>\n<p>setルールと同様に、showルールは、現在のブロック内またはファイルの終わりまで有効です。</p>\n<p>関数の代わりに、showルールのコロン右側は、要素に直接置換されるべきリテラル文字列またはコンテンツブロックを取ることもできます。\nまたshowルールのコロン左側は、以下に示すように、変換を適用する対象を定義する <em>セレクター</em> を受け取ることができます。</p>\n<ul>\n<li>\n<p><strong>全て：</strong> <code><span class=\"typ-key\">show</span><span class=\"typ-punct\">:</span> rest <span class=\"typ-op\">=&gt;</span> ..</code> <br />\nshowルール以降の全てを変換する。\n個別の関数呼び出しでラップすることなく、複雑なレイアウトを文書全体に適用するのに便利です。</p>\n</li>\n<li>\n<p><strong>文字列：</strong> <code><span class=\"typ-key\">show</span> <span class=\"typ-str\">&quot;Text&quot;</span><span class=\"typ-punct\">:</span> ..</code> <br />\n設定した文字列に対して、スタイル変更や文字の置き換えを行います。</p>\n</li>\n<li>\n<p><strong>正規表現：</strong> <code><span class=\"typ-key\">show</span> <span class=\"typ-func\">regex</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;\\w+&quot;</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> ..</code> <br />\n正規表現にマッチする文字列に対して、スタイル変更や文字の置き換えを行います。\n正規表現については<a href=\"/docs/reference/foundations/regex/\">regex 関数</a>を参照してください。</p>\n</li>\n<li>\n<p><strong>関数やフィールド：</strong> <code><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> ..</code> <br />\n指定されたフィールドを持つ要素のみを変換します。\n例えば、レベル1の見出しのスタイルだけを変更したい場合などに有効です。</p>\n</li>\n<li>\n<p><strong>ラベル：</strong> <code><span class=\"typ-key\">show</span> <span class=\"typ-label\">&lt;intro&gt;</span><span class=\"typ-punct\">:</span> ..</code> <br />\n指定されたラベルを持つ要素に対して適用する。\nラベルについては<a href=\"/docs/reference/foundations/label/\">labelタイプ</a>を参照してください。</p>\n</li>\n</ul>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-str\">&quot;Project&quot;</span><span class=\"typ-punct\">:</span> <span class=\"typ-func\">smallcaps</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-str\">&quot;badly&quot;</span><span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;great&quot;</span>\n\nWe started Project in 2019\nand are still working on it.\nProject is progressing badly.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/341cc85624eca5d9cf86c6e8dd61832c.png\" alt=\"Preview\"></div></div>"}}