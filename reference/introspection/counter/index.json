{"route":"/docs/reference/introspection/counter/","title":"Counter","description":"Documentation for the Counter type.","part":null,"outline":[{"id":"summary","name":"概要","children":[]},{"id":"accessing","name":"カウンターへのアクセス","children":[]},{"id":"displaying","name":"カウンターの表示","children":[]},{"id":"modifying","name":"カウンターの変更","children":[]},{"id":"ページカウンター","name":"ページカウンター","children":[]},{"id":"カスタムカウンター","name":"カスタムカウンター","children":[]},{"id":"インクリメント方法","name":"インクリメント方法","children":[]},{"id":"タイムトラベル","name":"タイムトラベル","children":[]},{"id":"other-state","name":"その他の状態","children":[]},{"id":"constructor","name":"コンストラクタ","children":[{"id":"constructor-key","name":"key","children":[]}]},{"id":"definitions","name":"定義","children":[{"id":"definitions-get","name":"Get","children":[]},{"id":"definitions-display","name":"Display","children":[{"id":"definitions-display-numbering","name":"numbering","children":[]},{"id":"definitions-display-both","name":"both","children":[]}]},{"id":"definitions-at","name":"At","children":[{"id":"definitions-at-selector","name":"selector","children":[]}]},{"id":"definitions-final","name":"Final","children":[]},{"id":"definitions-step","name":"Step","children":[{"id":"definitions-step-level","name":"level","children":[]}]},{"id":"definitions-update","name":"Update","children":[{"id":"definitions-update-update","name":"update","children":[]}]}]}],"body":{"kind":"type","content":{"name":"counter","title":"Counter","keywords":[],"oneliner":"ページや要素などの数え上げ。","details":"<p>ページや要素などの数え上げ。</p>\n<p>counter関数を用いることで、ページや見出し、図表などのカウンターにアクセスしたり、修正を加えたりできます。\nさらに、独自のカウンターを定義して、他のものを数えることもできます。</p>\n<p>カウンターは文書全体を通して変化するため、現在のその値は <em>コンテキスト依存</em> です。\n先に進む前に<a href=\"/docs/reference/context/\">コンテキスト</a>の章を読むことをおすすめします。</p>\n<h2 id=\"accessing\">カウンターへのアクセス</h2>\n<p><a href=\"/docs/reference/introspection/counter/#definitions-get\"><code>get</code></a>関数を用いると、生のカウンター値にアクセスできます。\nこの関数は<a href=\"/docs/reference/foundations/array/\">配列</a>を返します。\nカウンターは（節や小節などの見出しの場合に）複数のレベルを持ち、配列の各アイテムが1つのレベルに対応します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1.&quot;</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Introduction</span>\nRaw value of heading counter is\n<span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">get</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/8ea552ce797fc8605c34df5e705f0e54.png\" alt=\"Preview\"></div></div>\n<h2 id=\"displaying\">カウンターの表示</h2>\n<p>しばしば、カウンター値をより人間が読みやすい形で表示したいことがあります。\nそうするために、カウンターの<a href=\"/docs/reference/introspection/counter/#definitions-display\"><code>display</code></a>関数を呼び出します。\nこの関数は現在のカウンター値を取得し、与えられた形式か自動的に推論された<a href=\"/docs/reference/model/numbering/\">番号付け</a>で整形します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1.&quot;</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Introduction</span>\nSome text here.\n\n<span class=\"typ-heading\">= Background</span>\nThe current value is: <span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">}</span>\n\nOr in roman numerals: <span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;I&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/ec4522eb5a753d79b343291aff636a88.png\" alt=\"Preview\"></div></div>\n<h2 id=\"modifying\">カウンターの変更</h2>\n<p><code>step</code>および<code>update</code>メソッドを用いてカウンターを変更できます。</p>\n<ul>\n<li>\n<p><code>step</code>メソッドは、カウンター値を1増やします。\nカウンターは複数のレベルを持つことがあるため、オプションで<code>level</code>引数を取ります。\n<code>level</code>が指定された場合、指定された深さのカウンター値を増やします。</p>\n</li>\n<li>\n<p><code>update</code>メソッドを用いるとカウンターを任意に変更できます。\n通常の形式では、整数（あるいは複数レベルに対しては配列を）与えます。\n現在の値を受け取り新しい値を返す関数を代わりに与えると、より柔軟にできます。</p>\n</li>\n</ul>\n<p>見出しのカウンターは見出しが表示される前にインクリメントされます。\nそのため、2回目のupdateの後にカウンターが6であったとしても<code>Analysis</code>は7になります。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">heading</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1.&quot;</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Introduction</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Background</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">update</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">3</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">update</span><span class=\"typ-punct\">(</span>n <span class=\"typ-op\">=&gt;</span> n <span class=\"typ-op\">*</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Analysis</span>\nLet&#39;s skip 7.1.\n<span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">== Analysis</span>\nStill at <span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>heading<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/10e62abf96165699a2432049a18a6a40.png\" alt=\"Preview\"></div></div>\n<h2 id=\"ページカウンター\">ページカウンター</h2>\n<p>ページカウンターは特別です。\n改ページごとに値がインクリメントされます。\nしかし、他のカウンターと同様に手動でインクリメントもできます。\n例えば、前書きではローマ数字のページ番号を使い、メインのコンテンツではアラビア数字のページ番号に変更し、ページカウンターを1にリセットできます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;(i)&quot;</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Preface</span>\nThe preface is numbered with\nroman numerals.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">set</span> <span class=\"typ-func\">page</span><span class=\"typ-punct\">(</span>numbering<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;1 / 1&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>page<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">update</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Main text</span>\nHere, the counter is reset to one.\nWe also display both the current\npage and total number of pages in\nArabic numbers.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/3c30a8aceea73d91286b71e31d456047.png\" alt=\"Preview\"></div></div>\n<h2 id=\"カスタムカウンター\">カスタムカウンター</h2>\n<p>独自のカウンターを定義するには文字列をキーとして<code>counter</code>関数を呼び出します。\nこのキーはグローバルにカウンターを識別します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> mine <span class=\"typ-op\">=</span> <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;mycounter&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> mine<span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> mine<span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">update</span><span class=\"typ-punct\">(</span>c <span class=\"typ-op\">=&gt;</span> c <span class=\"typ-op\">*</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> mine<span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/b15cb3320af269d859e669c3cddd652.png\" alt=\"Preview\"></div></div>\n<h2 id=\"インクリメント方法\">インクリメント方法</h2>\n<p>カスタムカウンターを定義して使用する場合、一般にカウンターを最初にインクリメントしてから表示するべきです。\nこうすることで、カウンターのインクリメント動作をインクリメントする要素に依存させることができます。\n例えばtheoremのカウンターを実装する場合、theoremの定義では最初にカウンターのstepを書いてインクリメントを行い、その後に初めてカウンターとtheoremの内容を表示します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> c <span class=\"typ-op\">=</span> <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;theorem&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-func\">theorem</span><span class=\"typ-punct\">(</span>it<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-func\">block</span><span class=\"typ-punct\">[</span>\n  <span class=\"typ-pol\">#</span><span class=\"typ-pol\">c</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n  <span class=\"typ-strong\">*Theorem <span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> c<span class=\"typ-punct\">.</span><span class=\"typ-func\">display</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>:*</span>\n  <span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span>\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">theorem</span><span class=\"typ-punct\">[</span><span class=\"typ-math-delim\">$</span>1 = 1<span class=\"typ-math-delim\">$</span><span class=\"typ-punct\">]</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">theorem</span><span class=\"typ-punct\">[</span><span class=\"typ-math-delim\">$</span>2 &lt; 3<span class=\"typ-math-delim\">$</span><span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/69fe98ee7391fc895dbd81c85839a421.png\" alt=\"Preview\"></div></div>\n<p>この背景にある考え方は、見出しカウンターの例で説明するのが最適です。\n見出しカウンターの更新は、その見出しのレベルに依存します。\n見出しの直前にインクリメントすることで、第2レベルの見出しがあるときに<code>1</code>から<code>1.1</code>へと正しく更新できます。\nもし見出しの後にインクリメントする場合、どれをインクリメントするのかわかりません。</p>\n<p>カウンターは常に数える要素の前にインクリメントすべきなため、必ず0始まりです。\nこのようにして、（最初のインクリメントの後に）最初に表示されるときには1になります。</p>\n<h2 id=\"タイムトラベル\">タイムトラベル</h2>\n<p>カウンターはタイムトラベルができます！\nカウンターの最終的な値を実際に到達する前に知ることができますし、文書の任意の特定の場所での値がどうなっていたかさえ決定できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> mine <span class=\"typ-op\">=</span> <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;mycounter&quot;</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Values</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">context</span> <span class=\"typ-punct\">[</span>\n  Value here: <span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">get</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n  At intro: <span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">at</span><span class=\"typ-punct\">(</span><span class=\"typ-label\">&lt;intro&gt;</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n  Final value: <span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">final</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">update</span><span class=\"typ-punct\">(</span>n <span class=\"typ-op\">=&gt;</span> n <span class=\"typ-op\">+</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-heading\">= Introduction</span> <span class=\"typ-label\">&lt;intro&gt;</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">lorem</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">10</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">mine</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/c287511a94ac2600d9b5fb0c93f18d83.png\" alt=\"Preview\"></div></div>\n<h2 id=\"other-state\">その他の状態</h2>\n<p><code>counter</code>型は<a href=\"/docs/reference/introspection/state/\" title=\"state\">state</a>型と密接に関係しています。\nTypstにおける状態管理のより詳しい詳細と、なぜ単に普通の変数をカウンターに用いないのかについてはstateのドキュメントを参照してください。</p>","constructor":{"path":[],"name":"counter","title":"Construct","keywords":[],"oneliner":"キーで識別される新しいカウンターの作成。","element":false,"contextual":false,"deprecation":null,"details":"<p>キーで識別される新しいカウンターの作成。</p>","example":null,"self":false,"params":[{"name":"key","details":"<p>このcounterを識別するキー。</p>\n<ul>\n<li>文字列の場合、手動更新の場合にのみ影響を受けるカスタムカウンターを作成します</li>\n<li><a href=\"/docs/reference/layout/page/\" title=\"`page`\"><code>page</code></a>関数の場合、改ページにあわせてカウントされます</li>\n<li><a href=\"/docs/reference/foundations/selector/\">セレクター</a>の場合、セレクターにマッチする要素が現れるたびにカウントされます。\n例えば\n<ul>\n<li>要素関数が与えられた場合、その型を持つ要素がカウントされます</li>\n<li><a href=\"/docs/reference/foundations/label/\"><code><span class=\"typ-label\">&lt;label&gt;</span></code></a>が与えられた場合、そのラベルを持つ要素がカウントされます</li>\n</ul>\n</li>\n</ul>","example":null,"types":["str","label","selector","location","function"],"strings":[],"default":null,"positional":true,"named":false,"required":true,"variadic":false,"settable":false}],"returns":["counter"],"scope":[]},"scope":[{"path":["counter"],"name":"get","title":"Get","keywords":[],"oneliner":"現在のロケーションでのカウンター値を取得。","element":false,"contextual":true,"deprecation":null,"details":"<p>現在のロケーションでのカウンター値を取得。\nカウンターが1つの数値しか持たない場合でも、常に整数の配列を返します。</p>\n<p>これは<code>counter<span class=\"typ-punct\">.</span><span class=\"typ-func\">at</span><span class=\"typ-punct\">(</span><span class=\"typ-func\">here</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">)</span></code>と等価です。</p>","example":null,"self":true,"params":[],"returns":["int","array"],"scope":[]},{"path":["counter"],"name":"display","title":"Display","keywords":[],"oneliner":"番号付けされたカウンターの現在の値の表示および戻り値としての整形された出力。","element":false,"contextual":true,"deprecation":null,"details":"<p>番号付けされたカウンターの現在の値の表示および戻り値としての整形された出力。</p>","example":null,"self":true,"params":[{"name":"numbering","details":"<p>カウンターをどのように表示するか指定する<a href=\"/docs/reference/model/numbering/\">番号付けのパターンまたは関数</a>。\n関数が与えられた場合、カウンターの各数値が別々の引数として関数に渡されます。\n見出しの番号付けを関数指定するときなどの、引数の数値の数が変化する場合は<a href=\"/docs/reference/foundations/arguments/\">引数シンク</a>が使用できます。</p>\n<p>省略されるか<code><span class=\"typ-key\">auto</span></code>に設定された場合、カウントする要素に設定された番号付け形式を用いてカウンターを表示します。\nそのようなスタイルが存在しない場合は<code><span class=\"typ-str\">&quot;1.1&quot;</span></code>というパターン指定でカウンターが表示されます。</p>","example":null,"types":["auto","str","function"],"strings":[],"default":"<code><span class=\"typ-key\">auto</span></code>","positional":true,"named":false,"required":false,"variadic":false,"settable":false},{"name":"both","details":"<p>有効化された場合、トップレベルのカウンターの現在値と最終値を一緒に表示します。\n両者のスタイル設定は1つの番号付けパターンで指定できます。\nこれは、ページのnumberingプロパティで<code><span class=\"typ-str\">&quot;1 / 1&quot;</span></code>のようなパターンが与えられたときに、現在のページ番号と総ページ数を表示するために使用されます。</p>","example":null,"types":["bool"],"strings":[],"default":"<code><span class=\"typ-key\">false</span></code>","positional":false,"named":true,"required":false,"variadic":false,"settable":false}],"returns":["any"],"scope":[]},{"path":["counter"],"name":"at","title":"At","keywords":[],"oneliner":"指定された位置のカウンター値の取得。","element":false,"contextual":true,"deprecation":null,"details":"<p>指定された位置のカウンター値の取得。\nカウンターが1つの数値しか持たない場合でも、常に整数の配列を返します。</p>\n<p><code>selector</code>は文書中で厳密に1つだけの要素にマッチしなければなりません。\nこの目的で最も便利なセレクターは<a href=\"/docs/reference/foundations/label/\">ラベル</a>と<a href=\"/docs/reference/introspection/location/\">ロケーション</a>です。</p>","example":null,"self":true,"params":[{"name":"selector","details":"<p>カウンター値を取得する場所。</p>","example":null,"types":["label","selector","location","function"],"strings":[],"default":null,"positional":true,"named":false,"required":true,"variadic":false,"settable":false}],"returns":["int","array"],"scope":[]},{"path":["counter"],"name":"final","title":"Final","keywords":[],"oneliner":"文書の終わりでのカウンター値の取得。","element":false,"contextual":true,"deprecation":null,"details":"<p>文書の終わりでのカウンター値の取得。\nカウンターが1つの数値しか持たない場合でも、常に整数の配列を返します。</p>","example":null,"self":true,"params":[],"returns":["int","array"],"scope":[]},{"path":["counter"],"name":"step","title":"Step","keywords":[],"oneliner":"カウンター値を1増加。","element":false,"contextual":false,"deprecation":null,"details":"<p>カウンター値を1増加。</p>\n<p>更新は、返り値であるコンテンツが文書中に挿入された位置で適用されます。\n文書中に出力がなければ何も起こりません！\n例えば<code><span class=\"typ-key\">let</span> _ <span class=\"typ-op\">=</span> <span class=\"typ-func\">counter</span><span class=\"typ-punct\">(</span>page<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">step</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span></code>と書いた場合が、この何も起きないときに該当します。\nカウンターの更新は常にレイアウト順に適用されるため、この場合にはTypstはいつカウンターをインクリメントするのか分かりません。</p>","example":null,"self":true,"params":[{"name":"level","details":"<p>カウンターをインクリメントする深さ。\nデフォルトは<code><span class=\"typ-num\">1</span></code>です。</p>","example":null,"types":["int"],"strings":[],"default":"<code><span class=\"typ-num\">1</span></code>","positional":false,"named":true,"required":false,"variadic":false,"settable":false}],"returns":["content"],"scope":[]},{"path":["counter"],"name":"update","title":"Update","keywords":[],"oneliner":"カウンター値の更新。","element":false,"contextual":false,"deprecation":null,"details":"<p>カウンター値の更新。</p>\n<p><code>step</code>と同様に、生成されたコンテンツが文書中に配置されたときに限り更新が発生します。</p>","example":null,"self":true,"params":[{"name":"update","details":"<p>整数または整数の配列が与えられた場合、カウンターをその値に設定します。\n関数が与えられた場合、その関数は（各数値を別々の引数として）前のカウンターの値を受け取り、新しい値を（整数または配列で）返さなければなりません。</p>","example":null,"types":["int","array","function"],"strings":[],"default":null,"positional":true,"named":false,"required":true,"variadic":false,"settable":false}],"returns":["content"],"scope":[]}]}}}