{"route":"/docs/reference/scripting/","title":"スクリプト記述","description":"Typstのスクリプト記述機能を用いて、ドキュメントを自動化しましょう。","part":null,"outline":[{"id":"expressions","name":"式","children":[]},{"id":"blocks","name":"ブロック","children":[]},{"id":"bindings","name":"バインディングと分割","children":[]},{"id":"conditionals","name":"条件式","children":[]},{"id":"loops","name":"ループ","children":[]},{"id":"fields","name":"フィールド","children":[]},{"id":"methods","name":"メソッド","children":[]},{"id":"modules","name":"モジュール","children":[]},{"id":"packages","name":"パッケージ","children":[]},{"id":"operators","name":"演算子","children":[]}],"body":{"kind":"html","content":"<h1>スクリプト記述</h1>\n<p>Typstには強力なスクリプト言語が組み込まれています。これにより、ドキュメントを自動化し、コードを使用してより洗練されたスタイルを作成できます。\n以下は、スクリプト記述の概念の概要です。</p>\n<h2 id=\"expressions\">式</h2>\n<p>Typstでは、マークアップとコードが一体となっています。\n最も一般的な要素以外のものは　<em>関数</em> を使って作成されます。\nこれを可能な限り便利にするため、Typstはコード式をマークアップに埋め込むためのコンパクトな構文を提供しています。式はハッシュ（<code>#</code>）で始まり、\nこの式が終了すると通常のマークアップの解析が再開されます。\n式の直後に通常の文字列として解釈されるべき文字が続く場合、セミコロン（<code>;</code>）を使って式を強制的に終了できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-func\">#</span><span class=\"typ-func\">emph</span><span class=\"typ-punct\">[</span>Hello<span class=\"typ-punct\">]</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">emoji</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">face</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-str\">#</span><span class=\"typ-str\">&quot;hello&quot;</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/56fcebfd54e87e06f0936777ca6c4f31.png\" alt=\"Preview\"></div></div>\n<p>上記の例では、<a href=\"/docs/reference/foundations/function/\">関数呼び出し</a>、\n<a href=\"/docs/reference/scripting/#fields\">フィールドアクセス</a>、\nそして<a href=\"/docs/reference/scripting/#methods\">メソッド呼び出し</a>などのいくつかの使用可能な式を示しています。\nこの章の残りでは、より多くの種類の式について説明します。\nいくつかの種類の式はハッシュ構文と互換性がありません（例えば二項演算子式）。\nこのような式をマークアップに埋め込むためには、<code><span class=\"typ-punct\">#</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-op\">+</span><span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span></code>のように丸括弧を使用します。</p>\n<h2 id=\"blocks\">ブロック</h2>\n<p>コードを構造化し、マークアップを埋め込むために、Typstは次の二種類の <em>ブロック</em> を提供します。</p>\n<ul>\n<li>\n<p><strong>コードブロック</strong> <code><span class=\"typ-punct\">{</span> <span class=\"typ-key\">let</span> x <span class=\"typ-op\">=</span> <span class=\"typ-num\">1</span><span class=\"typ-punct\">;</span> x <span class=\"typ-op\">+</span> <span class=\"typ-num\">2</span> <span class=\"typ-punct\">}</span></code> <br />\nコードを書く際には、計算を複数のステートメントに分割したり、中間変数を作成したりすることがあるでしょう。\nコードブロックを使用すると、複数の式を1つのブロックにまとめられます。ブロック内の個々の式は改行またはセミコロンで区切られます。\nコードブロック内の個々の式の出力値は結合され、ブロックの値を決定します。\n<code><span class=\"typ-key\">let</span></code>バインディングのように有用な出力のない式は<code><span class=\"typ-key\">none</span></code>を生成し、これはどの値とも影響なく結合できます。</p>\n</li>\n<li>\n<p><strong>コンテンツブロック</strong> <code><span class=\"typ-punct\">[</span><span class=\"typ-strong\">*Hey*</span> there!<span class=\"typ-punct\">]</span></code> <br />\nコンテンツブロックを使用すると、マークアップやコンテンツをプログラム的な値として扱い、変数に保存したり、<a href=\"/docs/reference/foundations/function/\">関数</a>に渡したりできます。\nコンテンツブロックは角括弧で囲まれ、任意のマークアップを含められます。\nコンテンツブロックは<a href=\"/docs/reference/foundations/content/\">content</a>型の値を生成します。\n任意の数のコンテンツブロックを可変長引数として関数に渡せます。つまり、<code><span class=\"typ-func\">list</span><span class=\"typ-punct\">[</span>A<span class=\"typ-punct\">]</span><span class=\"typ-punct\">[</span>B<span class=\"typ-punct\">]</span></code>は<code><span class=\"typ-func\">list</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">[</span>A<span class=\"typ-punct\">]</span><span class=\"typ-punct\">,</span> <span class=\"typ-punct\">[</span>B<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span></code>と等価です。</p>\n</li>\n</ul>\n<p>コンテンツブロックとコードブロックは任意にネストできます。以下の例では、<code><span class=\"typ-punct\">[</span>hello<span class=\"typ-punct\">]</span></code>が<code>a <span class=\"typ-op\">+</span> <span class=\"typ-punct\">[</span> the <span class=\"typ-punct\">]</span> <span class=\"typ-op\">+</span> b</code>の出力と結合され、<code><span class=\"typ-punct\">[</span>hello from the <span class=\"typ-strong\">*world*</span><span class=\"typ-punct\">]</span></code>が生成されます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-punct\">#</span><span class=\"typ-punct\">{</span>\n  <span class=\"typ-key\">let</span> a <span class=\"typ-op\">=</span> <span class=\"typ-punct\">[</span>from<span class=\"typ-punct\">]</span>\n  <span class=\"typ-key\">let</span> b <span class=\"typ-op\">=</span> <span class=\"typ-punct\">[</span><span class=\"typ-strong\">*world*</span><span class=\"typ-punct\">]</span>\n  <span class=\"typ-punct\">[</span>hello <span class=\"typ-punct\">]</span>\n  a <span class=\"typ-op\">+</span> <span class=\"typ-punct\">[</span> the <span class=\"typ-punct\">]</span> <span class=\"typ-op\">+</span> b\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/f5f1a59a923ddd7899e3844457f683a1.png\" alt=\"Preview\"></div></div>\n<h2 id=\"bindings\">バインディングと分割</h2>\n<p>前述のように、変数は<code><span class=\"typ-key\">let</span></code>バインディングで定義できます。\n変数には<code>=</code>記号のあとに続く式の値が代入されます。値の代入は任意であり、値が代入されなければ変数は<code><span class=\"typ-key\">none</span></code>として初期化されます。\n<code><span class=\"typ-key\">let</span></code>キーワードは、<a href=\"/docs/reference/foundations/function/#defining-functions\">カスタム名前付き関数</a>を作成するためにも使用できます。\n変数は、それが含まれるブロックの残りの部分（または、変数が含まれるブロックがない場合はファイル全体）の中でアクセスできます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> name <span class=\"typ-op\">=</span> <span class=\"typ-str\">&quot;Typst&quot;</span>\nThis is <span class=\"typ-pol\">#</span><span class=\"typ-pol\">name</span>&#39;s documentation.\nIt explains <span class=\"typ-pol\">#</span><span class=\"typ-pol\">name</span>.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-func\">add</span><span class=\"typ-punct\">(</span>x<span class=\"typ-punct\">,</span> y<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> x <span class=\"typ-op\">+</span> y\nSum is <span class=\"typ-func\">#</span><span class=\"typ-func\">add</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">)</span>.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/cab2fd22fe9abd4d4b827c1bc30aee2f.png\" alt=\"Preview\"></div></div>\n<p>letバインディングは<a href=\"/docs/reference/foundations/array/\">配列</a>や<a href=\"/docs/reference/foundations/dictionary/\">辞書</a>の分割にも使用できます。\nこの場合、代入の左辺は配列や辞書と同じ形式でなければなりません。\n<code>..</code>演算子はパターン内で一度だけ、配列や辞書の残りの項目を受け取るために使用できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>x<span class=\"typ-punct\">,</span> y<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span>\nThe coordinates are <span class=\"typ-pol\">#</span><span class=\"typ-pol\">x</span>, <span class=\"typ-pol\">#</span><span class=\"typ-pol\">y</span>.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>a<span class=\"typ-punct\">,</span> <span class=\"typ-op\">..</span><span class=\"typ-punct\">,</span> b<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">4</span><span class=\"typ-punct\">)</span>\nThe first element is <span class=\"typ-pol\">#</span><span class=\"typ-pol\">a</span>.\nThe last element is <span class=\"typ-pol\">#</span><span class=\"typ-pol\">b</span>.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> books <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span>\n  Shakespeare<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Hamlet&quot;</span><span class=\"typ-punct\">,</span>\n  Homer<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;The Odyssey&quot;</span><span class=\"typ-punct\">,</span>\n  Austen<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Persuasion&quot;</span><span class=\"typ-punct\">,</span>\n<span class=\"typ-punct\">)</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>Austen<span class=\"typ-punct\">,</span><span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> books\nAusten wrote <span class=\"typ-pol\">#</span><span class=\"typ-pol\">Austen</span>.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>Homer<span class=\"typ-punct\">:</span> h<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> books\nHomer wrote <span class=\"typ-pol\">#</span><span class=\"typ-pol\">h</span>.\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>Homer<span class=\"typ-punct\">,</span> <span class=\"typ-op\">..</span>other<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> books\n<span class=\"typ-key\">#</span><span class=\"typ-key\">for</span> <span class=\"typ-punct\">(</span>author<span class=\"typ-punct\">,</span> title<span class=\"typ-punct\">)</span> <span class=\"typ-key\">in</span> other <span class=\"typ-punct\">[</span>\n  <span class=\"typ-pol\">#</span><span class=\"typ-pol\">author</span> wrote <span class=\"typ-pol\">#</span><span class=\"typ-pol\">title</span>.\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/574a8a54d94246e011156a58bb988f10.png\" alt=\"Preview\"></div></div>\n<p>分割パターンでアンダースコアを使用して、要素を破棄できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-punct\">(</span>_<span class=\"typ-punct\">,</span> y<span class=\"typ-punct\">,</span> _<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">)</span>\nThe y coordinate is <span class=\"typ-pol\">#</span><span class=\"typ-pol\">y</span>.\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/2d320f557a31c13c47827649626f615e.png\" alt=\"Preview\"></div></div>\n<p>分割は関数の引数リスト内でも機能します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> left <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">4</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">5</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> right <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">3</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">6</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">left</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">zip</span><span class=\"typ-punct\">(</span>right<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">map</span><span class=\"typ-punct\">(</span>\n  <span class=\"typ-punct\">(</span><span class=\"typ-punct\">(</span>a<span class=\"typ-punct\">,</span>b<span class=\"typ-punct\">)</span><span class=\"typ-punct\">)</span> <span class=\"typ-op\">=&gt;</span> a <span class=\"typ-op\">+</span> b\n<span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/eb451d0a1cf36461e8a56ce203acf067.png\" alt=\"Preview\"></div></div>\n<p>そして通常の代入の左辺でも機能します。これは、変数の値を交換するなどの場合に便利です。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-punct\">#</span><span class=\"typ-punct\">{</span>\n  <span class=\"typ-key\">let</span> a <span class=\"typ-op\">=</span> <span class=\"typ-num\">1</span>\n  <span class=\"typ-key\">let</span> b <span class=\"typ-op\">=</span> <span class=\"typ-num\">2</span>\n  <span class=\"typ-punct\">(</span>a<span class=\"typ-punct\">,</span> b<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span>b<span class=\"typ-punct\">,</span> a<span class=\"typ-punct\">)</span>\n  <span class=\"typ-punct\">[</span>a = <span class=\"typ-pol\">#</span><span class=\"typ-pol\">a</span>, b = <span class=\"typ-pol\">#</span><span class=\"typ-pol\">b</span><span class=\"typ-punct\">]</span>\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/2c2bcc6a2509a95daa0bc4e986ee7e6d.png\" alt=\"Preview\"></div></div>\n<h2 id=\"conditionals\">条件式</h2>\n<p>条件式を使用すると、ある条件が満たされているかどうかに応じて、異なるものを表示したり計算したりできます。\nTypstは<code><span class=\"typ-key\">if</span></code>式、<code>else <span class=\"typ-key\">if</span></code>式、および<code>else</code>式をサポートしています。\n条件が<code><span class=\"typ-key\">true</span></code>の場合、条件式は<code>if</code>の部分の結果が得られ、そうでない場合は<code>else</code>の部分の結果が得られます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">if</span> <span class=\"typ-num\">1</span> <span class=\"typ-op\">&lt;</span> <span class=\"typ-num\">2</span> <span class=\"typ-punct\">[</span>\n  This is shown\n<span class=\"typ-punct\">]</span> <span class=\"typ-key\">else</span> <span class=\"typ-punct\">[</span>\n  This is not.\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/9f03dfe97f385ab1a6d01127a9152c4d.png\" alt=\"Preview\"></div></div>\n<p>各条件分岐は、その本文としてコードブロックまたはコンテンツブロックを含められます。</p>\n<ul>\n<li><code><span class=\"typ-key\">if</span> condition <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code></li>\n<li><code><span class=\"typ-key\">if</span> condition <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span></code></li>\n<li><code><span class=\"typ-key\">if</span> condition <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span> <span class=\"typ-key\">else</span> <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code></li>\n<li><code><span class=\"typ-key\">if</span> condition <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span> <span class=\"typ-key\">else</span> <span class=\"typ-key\">if</span> condition <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span> <span class=\"typ-key\">else</span> <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span></code></li>\n</ul>\n<h2 id=\"loops\">ループ</h2>\n<p>ループを使用すると、コンテンツを繰り返したり、何かを反復的に計算したりできます。\nTypstは、<code><span class=\"typ-key\">for</span></code>ループと<code><span class=\"typ-key\">while</span></code>ループの2つのループをサポートしています。\n前者は指定されたコレクションを反復するのに対し、後者は条件が満たされている限り反復を続けます。\nブロックと同様に、ループは各反復からの結果を1つの値に <em>結合</em> します。</p>\n<p>以下の例では、forループによって作成された3つの文が1つのコンテンツ値に結合され、whileループの中の長さ1の配列が1つの大きな配列に結合されます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">for</span> c <span class=\"typ-key\">in</span> <span class=\"typ-str\">&quot;ABC&quot;</span> <span class=\"typ-punct\">[</span>\n  <span class=\"typ-pol\">#</span><span class=\"typ-pol\">c</span> is a letter.\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> n <span class=\"typ-op\">=</span> <span class=\"typ-num\">2</span>\n<span class=\"typ-key\">#</span><span class=\"typ-key\">while</span> n <span class=\"typ-op\">&lt;</span> <span class=\"typ-num\">10</span> <span class=\"typ-punct\">{</span>\n  n <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span>n <span class=\"typ-op\">*</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span> <span class=\"typ-op\">-</span> <span class=\"typ-num\">1</span>\n  <span class=\"typ-punct\">(</span>n<span class=\"typ-punct\">,</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/ef87ec09b6f156465a2deb8f2ca4620b.png\" alt=\"Preview\"></div></div>\n<p>forループはさまざまなコレクションを反復処理できます。</p>\n<ul>\n<li>\n<p><code><span class=\"typ-key\">for</span> value <span class=\"typ-key\">in</span> array <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code> <br />\n<a href=\"/docs/reference/foundations/array/\">配列</a>内の各項目を反復処理します。<a href=\"/docs/reference/scripting/#bindings\">letバインディング</a>で説明されている分割構文もここで使用できます。</p>\n</li>\n<li>\n<p><code><span class=\"typ-key\">for</span> pair <span class=\"typ-key\">in</span> dict <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code> <br />\n<a href=\"/docs/reference/foundations/dictionary/\">辞書</a>のキーと値のペアを反復処理します。ペアは<code><span class=\"typ-key\">for</span> <span class=\"typ-punct\">(</span>key<span class=\"typ-punct\">,</span> value<span class=\"typ-punct\">)</span> <span class=\"typ-key\">in</span> dict <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code>を使用しても分割できます。これは、全てのキーと値のペアの一時配列を作成しないため、<code><span class=\"typ-key\">for</span> pair <span class=\"typ-key\">in</span> dict<span class=\"typ-punct\">.</span><span class=\"typ-func\">pairs</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code>よりも効率的です。</p>\n</li>\n<li>\n<p><code><span class=\"typ-key\">for</span> letter <span class=\"typ-key\">in</span> <span class=\"typ-str\">&quot;abc&quot;</span> <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code> <br />\n<a href=\"/docs/reference/foundations/str/\">文字列</a>の各文字を反復処理します。厳密に言うと、文字列の書記素クラスタの反復処理を行います。ほとんどの場合、書記素クラスタは単一のコードポイントに対応します。しかし、書記素クラスタは複数のコードポイントを含むことがあります。例えば、国旗の絵文字などです。</p>\n</li>\n<li>\n<p><code><span class=\"typ-key\">for</span> byte <span class=\"typ-key\">in</span> <span class=\"typ-func\">bytes</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;😀&quot;</span><span class=\"typ-punct\">)</span> <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code> <br />\n<a href=\"/docs/reference/foundations/str/\">文字列</a>から変換されたり、エンコーディングなしでファイルから<a href=\"/docs/reference/data-loading/read/\">読み取る</a>ことができる<a href=\"/docs/reference/foundations/bytes/\">バイト</a>を反復処理します。各バイト値は<code><span class=\"typ-num\">0</span></code>から<code><span class=\"typ-num\">255</span></code>までの<a href=\"/docs/reference/foundations/int/\">整数</a>です。</p>\n</li>\n</ul>\n<p>ループの実行を制御するために、Typstは<code><span class=\"typ-key\">break</span></code>と<code><span class=\"typ-key\">continue</span></code>ステートメントを提供しています。\n前者はループを早期終了し、後者はループの次の反復を開始します。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">for</span> letter <span class=\"typ-key\">in</span> <span class=\"typ-str\">&quot;abc nope&quot;</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-key\">if</span> letter <span class=\"typ-op\">==</span> <span class=\"typ-str\">&quot; &quot;</span> <span class=\"typ-punct\">{</span>\n    <span class=\"typ-key\">break</span>\n  <span class=\"typ-punct\">}</span>\n\n  letter\n<span class=\"typ-punct\">}</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/8ba145cb687a39c8f9146abd55f943f9.png\" alt=\"Preview\"></div></div>\n<p>ループの本体はコードブロックまたはコンテンツブロックにできます。</p>\n<ul>\n<li><code><span class=\"typ-key\">for</span> .. in collection <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code></li>\n<li><code><span class=\"typ-key\">for</span> .. in collection <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span></code></li>\n<li><code><span class=\"typ-key\">while</span> condition <span class=\"typ-punct\">{</span>..<span class=\"typ-punct\">}</span></code></li>\n<li><code><span class=\"typ-key\">while</span> condition <span class=\"typ-punct\">[</span>..<span class=\"typ-punct\">]</span></code></li>\n</ul>\n<h2 id=\"fields\">フィールド</h2>\n<p><em>ドット記法</em> を使用することで値のフィールドにアクセスできます。<a href=\"/docs/reference/foundations/content/\">コンテンツ</a>型の値については、<a href=\"/docs/reference/foundations/content/#definitions-fields\">fields</a>関数を使用してフィールドを一覧表示できます。</p>\n<!-- textlint-disable jtf-style/1.1.3.箇条書き -->\n<p>対象の値は以下のいずれかです。</p>\n<ul>\n<li>指定されたキーを持つ<a href=\"/docs/reference/foundations/dictionary/\">辞書</a>、</li>\n<li>指定された修飾子を持つ<a href=\"/docs/reference/foundations/symbol/\">記号</a>、</li>\n<li>指定された定義を含む<a href=\"/docs/reference/foundations/module/\">モジュール</a>、</li>\n<li>指定されたフィールドを持つ要素で構成された<a href=\"/docs/reference/foundations/content/\">コンテンツ</a>。利用可能なフィールドは、その要素が構築された際に与えられた<a href=\"/docs/reference/foundations/function/#element-functions\">要素関数</a>の引数と一致します。</li>\n</ul>\n<!-- textlint-enable -->\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> it <span class=\"typ-op\">=</span> <span class=\"typ-punct\">[</span><span class=\"typ-heading\">= Heading</span><span class=\"typ-punct\">]</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">body</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">depth</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">fields</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> dict <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span>greet<span class=\"typ-punct\">:</span> <span class=\"typ-str\">&quot;Hello&quot;</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">dict</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">greet</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">emoji</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">face</span>\n\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/e560cf75c003b55ee615a91fba54908a.png\" alt=\"Preview\"></div></div>\n<h2 id=\"methods\">メソッド</h2>\n<p>メソッド呼び出しは、値の<a href=\"/docs/reference/foundations/type/\">型</a>で定義された関数を呼び出す便利な方法です。\n例えば、<a href=\"/docs/reference/foundations/str/#definitions-len\"><code>str.len</code></a>関数は下記の2つの同等の方法で呼び出せます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-pol\">#</span><span class=\"typ-pol\">str</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;abc&quot;</span><span class=\"typ-punct\">)</span> is the same as\n<span class=\"typ-str\">#</span><span class=\"typ-str\">&quot;abc&quot;</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/8fc9134962ea2ca6f8f3beaa1a77c940.png\" alt=\"Preview\"></div></div>\n<p>メソッド呼び出しの構造は<code>value<span class=\"typ-punct\">.</span><span class=\"typ-func\">method</span><span class=\"typ-punct\">(</span><span class=\"typ-op\">..</span>args<span class=\"typ-punct\">)</span></code>であり、これと等価である完全な関数呼び出しは<code><span class=\"typ-func\">type</span><span class=\"typ-punct\">(</span>value<span class=\"typ-punct\">)</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">method</span><span class=\"typ-punct\">(</span>value<span class=\"typ-punct\">,</span> <span class=\"typ-op\">..</span>args<span class=\"typ-punct\">)</span></code>です。各型のドキュメントには、その型に関連付けられた関数が一覧表示されています。現在、独自のメソッドは定義できません</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> values <span class=\"typ-op\">=</span> <span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">3</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">4</span><span class=\"typ-punct\">)</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">values</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">pop</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">values</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> <span class=\"typ-escape\">\\</span>\n\n<span class=\"typ-punct\">#</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;a, b, c&quot;</span>\n    <span class=\"typ-punct\">.</span><span class=\"typ-func\">split</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;, &quot;</span><span class=\"typ-punct\">)</span>\n    <span class=\"typ-punct\">.</span><span class=\"typ-func\">join</span><span class=\"typ-punct\">[</span> <span class=\"typ-escape\">---</span> <span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-str\">#</span><span class=\"typ-str\">&quot;abc&quot;</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">)</span> is the same as\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">str</span><span class=\"typ-punct\">.</span><span class=\"typ-func\">len</span><span class=\"typ-punct\">(</span><span class=\"typ-str\">&quot;abc&quot;</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/69c81d74d21d4e212b8bdde97b02c949.png\" alt=\"Preview\"></div></div>\n<p>特定の値に対して呼び出された際に、その値を変更する特別な関数がいくつかあります（例： <a href=\"/docs/reference/foundations/array/#definitions-push\"><code>array.push</code></a>）。\nこれらの関数は、<em>必ず</em> メソッド形式で呼び出す必要があります。\n場合によっては、メソッドが副作用のためだけに呼び出されるとき、その戻り値は無視されるべきです（結合に加わるべきではありません）。\n値を破棄する標準的な方法は、<code><span class=\"typ-key\">let</span> _ <span class=\"typ-op\">=</span> array<span class=\"typ-punct\">.</span><span class=\"typ-func\">remove</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">1</span><span class=\"typ-punct\">)</span></code>のように\nletバインディングを使用することです。</p>\n<h2 id=\"modules\">モジュール</h2>\n<p>Typstプロジェクトを、<em>モジュール</em> と呼ばれる複数のファイルに分割できます。\nモジュールは他のモジュールのコンテンツや定義を複数の方法で参照できます。</p>\n<!-- textlint-disable jtf-style/1.1.3.箇条書き -->\n<ul>\n<li>\n<p><strong>インクルード：</strong> <code><span class=\"typ-key\">include</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span></code> <br />\nパス<code>bar.typ</code>にあるファイルを評価し、その結果として得られる<a href=\"/docs/reference/foundations/content/\">コンテンツ</a>を返します。</p>\n</li>\n<li>\n<p><strong>インポート：</strong> <code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span></code> <br />\nパス<code>bar.typ</code>にあるファイルを評価し、その結果として得られる\n<a href=\"/docs/reference/foundations/module/\">モジュール</a>を現在のスコープに<code>bar</code>（拡張子なしのファイル名）として挿入します。次のように、<code>as</code>キーワードを使用してモジュール名を変更できます。\n<code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span> <span class=\"typ-key\">as</span> baz</code>\nYou can import nested items using dot notation: <code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span><span class=\"typ-punct\">:</span> baz<span class=\"typ-punct\">.</span>a</code>.</p>\n</li>\n<li>\n<p><strong>アイテムのインポート:</strong> <code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span><span class=\"typ-punct\">:</span> a<span class=\"typ-punct\">,</span> b</code> <br />\nパス<code>bar.typ</code>にあるファイルを評価して、変数<code>a</code>と<code>b</code>の値\n（これらは<code>bar.typ</code>で、例えば<code><span class=\"typ-key\">let</span></code>バインディングを通じて定義されている必要があります）\nを抽出し、現在のファイルで定義します。  <code>a, b</code>を<code>*</code>に置き換えると、モジュールで定義された全ての変数が読み込まれます。\n次のように、<code>as</code>キーワードを使用してモジュール名を変更できます。\n<code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;bar.typ&quot;</span><span class=\"typ-punct\">:</span> a <span class=\"typ-key\">as</span> one<span class=\"typ-punct\">,</span> b <span class=\"typ-key\">as</span> two</code></p>\n</li>\n</ul>\n<!-- textlint-enable -->\n<p>以下の例に示すように、パスの代わりに<a href=\"/docs/reference/foundations/module/\">モジュール値</a>を使用できます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">import</span> emoji<span class=\"typ-punct\">:</span> face\n<span class=\"typ-pol\">#</span><span class=\"typ-pol\">face</span><span class=\"typ-punct\">.</span><span class=\"typ-pol\">grin</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/9c38d95483bccbf7479a82427087ab2a.png\" alt=\"Preview\"></div></div>\n<h2 id=\"packages\">パッケージ</h2>\n<p>プロジェクト間でビルド中のブロックを再利用するために、Typstの <em>パッケージ</em> を作成してインポートできます。\nパッケージのインポートは、名前空間、名前、バージョンの3つの組み合わせとして指定されます。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;@preview/example:0.1.0&quot;</span><span class=\"typ-punct\">:</span> add\n<span class=\"typ-func\">#</span><span class=\"typ-func\">add</span><span class=\"typ-punct\">(</span><span class=\"typ-num\">2</span><span class=\"typ-punct\">,</span> <span class=\"typ-num\">7</span><span class=\"typ-punct\">)</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/3d994560e3517e38057aec147c441de6.png\" alt=\"Preview\"></div></div>\n<p><code>preview</code>名前空間には、コミュニティで共有されているパッケージが含まれています。全ての利用可能なコミュニティパッケージは<a href=\"https://typst.app/universe/\">Typst Universe</a>にあります。</p>\n<p>Typstをローカルで使用している場合、独自のシステムローカルパッケージを作成できます。詳細については、<a href=\"https://github.com/typst/packages\">パッケージリポジトリ</a>を参照してください。</p>\n<h2 id=\"operators\">演算子</h2>\n<p>以下の表は、使用可能な全ての単項および二項演算子の効果、引数の個数（単項あるいは二項）、および優先度（高いほど強く結合）を示しています。\n<a href=\"/docs/reference/foundations/calc/#functions-rem-euclid\">剰余</a>\nなどの一部の演算は特別な構文を持たず、\n<a href=\"/docs/reference/foundations/calc/\"><code>calc</code></a>モジュールの関数を用いて実現できます。</p>\n<table><thead><tr><th style=\"text-align: center\">演算子</th><th>効果</th><th style=\"text-align: center\">引数の個数</th><th style=\"text-align: center\">優先度</th></tr></thead><tbody>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-op\">-</span></code></td><td>負号</td><td style=\"text-align: center\">単項</td><td style=\"text-align: center\">7</td></tr>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-op\">+</span></code></td><td>効果なし (対称性のために存在)</td><td style=\"text-align: center\">単項</td><td style=\"text-align: center\">7</td></tr>\n<tr><td style=\"text-align: center\"><code>*</code></td><td>乗算</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">6</td></tr>\n<tr><td style=\"text-align: center\"><code>/</code></td><td>除算</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">6</td></tr>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-op\">+</span></code></td><td>加算</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">5</td></tr>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-op\">-</span></code></td><td>減算</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">5</td></tr>\n<tr><td style=\"text-align: center\"><code>==</code></td><td>等価性の評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>!=</code></td><td>非等価性の評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>&lt;</code></td><td>小なりの評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>&lt;=</code></td><td>以下の評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>&gt;</code></td><td>大なりの評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>&gt;=</code></td><td>以上の評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code>in</code></td><td>コレクション内に存在することの評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-key\">not</span> <span class=\"typ-key\">in</span></code></td><td>コレクション内に存在しないことの評価</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">4</td></tr>\n<tr><td style=\"text-align: center\"><code><span class=\"typ-key\">not</span></code></td><td>論理否定</td><td style=\"text-align: center\">単項</td><td style=\"text-align: center\">3</td></tr>\n<tr><td style=\"text-align: center\"><code>and</code></td><td>短絡論理積</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">3</td></tr>\n<tr><td style=\"text-align: center\"><code>or</code></td><td>短絡論理和</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">2</td></tr>\n<tr><td style=\"text-align: center\"><code>=</code></td><td>代入</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">1</td></tr>\n<tr><td style=\"text-align: center\"><code>+=</code></td><td>加算代入</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">1</td></tr>\n<tr><td style=\"text-align: center\"><code>-=</code></td><td>減算代入</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">1</td></tr>\n<tr><td style=\"text-align: center\"><code>*=</code></td><td>乗算代入</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">1</td></tr>\n<tr><td style=\"text-align: center\"><code>/=</code></td><td>除算代入</td><td style=\"text-align: center\">二項</td><td style=\"text-align: center\">1</td></tr>\n</tbody></table>"}}