{"route":"/docs/reference/foundations/function/","title":"Function","description":"Documentation for the Function type.","part":null,"outline":[{"id":"summary","name":"概要","children":[]},{"id":"例","name":"例","children":[]},{"id":"要素関数","name":"要素関数","children":[]},{"id":"関数スコープ","name":"関数スコープ","children":[]},{"id":"ユーザー定義関数","name":"ユーザー定義関数","children":[]},{"id":"関数のインポート","name":"関数のインポート","children":[]},{"id":"unnamed","name":"無名関数","children":[]},{"id":"関数の純粋性に関する注意","name":"関数の純粋性に関する注意","children":[]},{"id":"definitions","name":"定義","children":[{"id":"definitions-with","name":"With","children":[{"id":"definitions-with-arguments","name":"arguments","children":[]}]},{"id":"definitions-where","name":"Where","children":[{"id":"definitions-where-fields","name":"fields","children":[]}]}]}],"body":{"kind":"type","content":{"name":"function","title":"Function","keywords":[],"oneliner":"引数値から戻り値への写像。","details":"<p>引数値から戻り値への写像。</p>\n<p>関数名の直後に括弧で囲まれたカンマ区切りの関数の <em>引数</em> のリストを書くことにより関数を呼び出すことができます。\n加えて、通常の引数リストの後に任意の数のコンテンツブロック引数を関数に渡すこともできます。\n通常の引数リストが空の場合は省略が可能です。\nTypstは位置引数と名前付き引数をサポートしています。\n前者は位置と型によって識別され、後者は<code>name: value</code>のように書きます。</p>\n<p>数式モードでは、関数呼び出しは特殊な振る舞いをします。\n詳細は<a href=\"/docs/reference/math/\">数式のドキュメント</a>を参照して下さい。</p>\n<h2 id=\"例\">例</h2>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-comment\">// Call a function.</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">list</span><span class=\"typ-punct\">(</span><span class=\"typ-punct\">[</span>A<span class=\"typ-punct\">]</span><span class=\"typ-punct\">,</span> <span class=\"typ-punct\">[</span>B<span class=\"typ-punct\">]</span><span class=\"typ-punct\">)</span>\n\n<span class=\"typ-comment\">// Named arguments and trailing</span>\n<span class=\"typ-comment\">// content blocks.</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">enum</span><span class=\"typ-punct\">(</span>start<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>A<span class=\"typ-punct\">]</span><span class=\"typ-punct\">[</span>B<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-comment\">// Version without parentheses.</span>\n<span class=\"typ-func\">#</span><span class=\"typ-func\">list</span><span class=\"typ-punct\">[</span>A<span class=\"typ-punct\">]</span><span class=\"typ-punct\">[</span>B<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/87cba5b2546c4d8134e4fbb8ab2e42e8.png\" alt=\"Preview\"></div></div>\n<p>関数はTypstにおいて基礎となる構成要素です。\nTypstはさまざまな組版タスクに応じた関数を提供しています。\nさらには、作成されるマークアップの裏側では関数が用いられており、全てのスタイル設定は関数を介して行われます。\nこのリファレンスでは利用可能な全ての関数とその使い方を示します。\nTypstで関数をさらに活用する方法については、<a href=\"/docs/reference/styling/#set-rules\">setルール</a>および<a href=\"/docs/reference/styling/#show-rules\">showルール</a>のドキュメントも参照して下さい。</p>\n<h2 id=\"要素関数\">要素関数</h2>\n<p><a href=\"/docs/reference/model/heading/\">見出し</a>や<a href=\"/docs/reference/model/table/\">表</a>のような、いくつかの関数は <em>要素</em> と結びついており、呼び出すとその種類に応じた要素を作成します。\nさらに、通常の関数とは異なり、要素関数は<a href=\"/docs/reference/styling/#set-rules\">setルール</a>、<a href=\"/docs/reference/styling/#show-rules\">showルール</a>および <a href=\"/docs/reference/foundations/selector/\">セレクター</a>で使用可能です。</p>\n<h2 id=\"関数スコープ\">関数スコープ</h2>\n<p>関数は、<a href=\"/docs/reference/scripting/#modules\">モジュール</a>と同様に自身のスコープ内に関連する定義を保持できます。\nこの例は<a href=\"/docs/reference/foundations/assert/#definitions-eq\"><code>assert.eq</code></a>や<a href=\"/docs/reference/model/list/#definitions-item\"><code>list.item</code></a>です。\nしかし、現在この機能が利用可能なのは組み込み関数のみです。</p>\n<h2 id=\"ユーザー定義関数\">ユーザー定義関数</h2>\n<p><a href=\"/docs/reference/scripting/#bindings\">letバインディング</a>を用いることで、バインディング名の後に引数リストを持ったユーザー定義関数を定義することができます。\n引数リストには必須の位置引数、デフォルト値を持つ名前付き引数および<a href=\"/docs/reference/foundations/arguments/\">可変長引数</a>を用いることができます。</p>\n<p>関数バインディングの右辺は関数本体で、ブロックか任意の式です。\n関数の戻り値を定義し、引数に依存させることができます。\n関数本体が<a href=\"/docs/reference/scripting/#blocks\">コードブロック</a>の場合、戻り値はブロック内の全ての式を連結させた結果になります。</p>\n<p>関数本体内では、<code>return</code>キーワードを用いて処理を途中で抜け出したり、必要に応じて戻り値を指定して返したりできます。\n戻り値が明示的に与えられない場合、本体は<code>return</code>の前の式全てを連結した結果として評価されます。</p>\n<p>意味のある値を何も返さない関数は、代わりに<a href=\"/docs/reference/foundations/none/\" title=\"`none`\"><code>none</code></a>を返します。\nこのような関数の戻り値の型はドキュメント中では明示的に指定されていません\n（この例としては<a href=\"/docs/reference/foundations/array/#definitions-push\" title=\"`array.push`\"><code>array.push</code></a>が該当します）。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">let</span> <span class=\"typ-func\">alert</span><span class=\"typ-punct\">(</span>body<span class=\"typ-punct\">,</span> fill<span class=\"typ-punct\">:</span> red<span class=\"typ-punct\">)</span> <span class=\"typ-op\">=</span> <span class=\"typ-punct\">{</span>\n  <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>white<span class=\"typ-punct\">)</span>\n  <span class=\"typ-key\">set</span> <span class=\"typ-func\">align</span><span class=\"typ-punct\">(</span>center<span class=\"typ-punct\">)</span>\n  <span class=\"typ-func\">rect</span><span class=\"typ-punct\">(</span>\n    fill<span class=\"typ-punct\">:</span> fill<span class=\"typ-punct\">,</span>\n    inset<span class=\"typ-punct\">:</span> <span class=\"typ-num\">8pt</span><span class=\"typ-punct\">,</span>\n    radius<span class=\"typ-punct\">:</span> <span class=\"typ-num\">4pt</span><span class=\"typ-punct\">,</span>\n    <span class=\"typ-punct\">[</span><span class=\"typ-strong\">*Warning:<span class=\"typ-escape\">\\</span> <span class=\"typ-pol\">#</span><span class=\"typ-pol\">body</span>*</span><span class=\"typ-punct\">]</span><span class=\"typ-punct\">,</span>\n  <span class=\"typ-punct\">)</span>\n<span class=\"typ-punct\">}</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">alert</span><span class=\"typ-punct\">[</span>\n  Danger is imminent!\n<span class=\"typ-punct\">]</span>\n\n<span class=\"typ-func\">#</span><span class=\"typ-func\">alert</span><span class=\"typ-punct\">(</span>fill<span class=\"typ-punct\">:</span> blue<span class=\"typ-punct\">)</span><span class=\"typ-punct\">[</span>\n  KEEP OFF TRACKS\n<span class=\"typ-punct\">]</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/e7ac0ae1342dcd1b7bfc1dce40ec5bed.png\" alt=\"Preview\"></div></div>\n<h2 id=\"関数のインポート\">関数のインポート</h2>\n<p>関数は、<code><span class=\"typ-key\">import</span></code>を用いてあるファイル（<a href=\"/docs/reference/scripting/#modules\"><code>module</code></a>）から別のファイルにインポートすることができます。\n例えば、上記の例にある<code>alert</code>関数を<code>foo.typ</code>というファイルに定義したとします。\nこの場合、<code><span class=\"typ-key\">import</span> <span class=\"typ-str\">&quot;foo.typ&quot;</span><span class=\"typ-punct\">:</span> alert</code>と書くことで別のファイルにインポートできます。</p>\n<h2 id=\"unnamed\">無名関数</h2>\n<p>引数リストに続けて <code>=&gt;</code> と関数本体を指定することで、バインディングを作らずに無名関数も作成できます。\nもし関数の引数が1つだけならば、引数リストの周りの括弧は必須ではありません。\n無名関数は主にshowルールで用いると便利ですが、page関数の<a href=\"/docs/reference/layout/page/#parameters-footer\"><code>footer</code></a>プロパティのような、関数を引数に取る設定可能プロパティにも便利です。</p>\n<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> <span class=\"typ-str\">&quot;once?&quot;</span><span class=\"typ-punct\">:</span> it <span class=\"typ-op\">=&gt;</span> <span class=\"typ-punct\">[</span><span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span> <span class=\"typ-pol\">#</span><span class=\"typ-pol\">it</span><span class=\"typ-punct\">]</span>\nonce?\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/c9779efb0fcc717fd4868ec6868bdcf9.png\" alt=\"Preview\"></div></div>\n<h2 id=\"関数の純粋性に関する注意\">関数の純粋性に関する注意</h2>\n<p>Typstにおいて関数は全て <em>純粋</em> です。\nこれは同じ引数からは常に同じ結果が返ってくることを意味します。\n純粋関数は2回目の呼び出し時に別の値を生成するために何かを「記憶」することはできません。</p>\n<p>唯一の例外は<a href=\"/docs/reference/foundations/array/#definitions-push\"><code>array.push(value)</code></a>のような組み込みメソッドです。\nこれらは呼び出された対象を変更できます。</p>","constructor":null,"scope":[{"path":["function"],"name":"with","title":"With","keywords":[],"oneliner":"指定した引数を事前に適用した新しい関数を返します。","element":false,"contextual":false,"deprecation":null,"details":"<p>指定した引数を事前に適用した新しい関数を返します。</p>","example":null,"self":true,"params":[{"name":"arguments","details":"<p>関数に適用する引数。</p>","example":null,"types":["any"],"strings":[],"default":null,"positional":true,"named":false,"required":true,"variadic":true,"settable":false}],"returns":["function"],"scope":[]},{"path":["function"],"name":"where","title":"Where","keywords":[],"oneliner":"この関数に属する要素のうち、与えられた引数と同じ値のフィールドを持つものを絞り込むセレクターを返します。","element":false,"contextual":false,"deprecation":null,"details":"<p>この関数に属する要素のうち、与えられた引数と同じ値のフィールドを持つものを絞り込むセレクターを返します。</p>","example":"<div class=\"previewed-code\"><pre><code><span class=\"typ-key\">#</span><span class=\"typ-key\">show</span> heading<span class=\"typ-punct\">.</span><span class=\"typ-func\">where</span><span class=\"typ-punct\">(</span>level<span class=\"typ-punct\">:</span> <span class=\"typ-num\">2</span><span class=\"typ-punct\">)</span><span class=\"typ-punct\">:</span> <span class=\"typ-key\">set</span> <span class=\"typ-func\">text</span><span class=\"typ-punct\">(</span>blue<span class=\"typ-punct\">)</span>\n<span class=\"typ-heading\">= Section</span>\n<span class=\"typ-heading\">== Subsection</span>\n<span class=\"typ-heading\">=== Sub-subsection</span>\n</code></pre><div class=\"preview\"><img src=\"/docs/assets/54e4780e95888ad47cba40e40c1d918a.png\" alt=\"Preview\"></div></div>","self":true,"params":[{"name":"fields","details":"<p>絞り込むフィールド。</p>","example":null,"types":["any"],"strings":[],"default":null,"positional":true,"named":false,"required":true,"variadic":true,"settable":false}],"returns":["selector"],"scope":[]}]}}}